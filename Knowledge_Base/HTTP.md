## Cookie和Session

### 概念
* Session工作原理
	
	用户请求服务器，根据特定的算法生成唯一的`sessionId`，
	关联的数据存放在服务器，散列表存放。
	
	`Id`会存入到客户端的`cookie`中，浏览器再次访问时，带上`Id`获取相关信息，浏览器关闭则失效。
	
	大小类型无限制
	
* cookie
	用户信息等存放在客户端
	
	安全性较低，cookie欺诈
	
	cookie大小不能超过 4KB，类型只能为字符串

### 使用

* 用户禁用`cookie` 如何传递`sessionId`？
  * 重写url
  * 隐藏表单发送

### 风险和思考

* `cookie`中存储`sessionId`，和直接使用cookie存用户信息的区别 ？？

  最简单的模式确实是获取了sessionId就可以直接在其他的地方登陆。

  对于浏览器和客户端而已，需要确定登陆状态的方案其实有很多的。

  比如：验证 refer,agent 或者其他的加密字符串，只需要保证你前端传递到服务器的请求数据（包含头或者体），服务器能处理之后验证得到正确的session就可以了。

  服务器端的处理方式是可以自己处理的，所以怎么验证也可以自定义。

* `cookie`被盗走，通过模拟请求工具是不是一下就可以登录了 ？？

  这个没有办法处理，`http`协议的的无状态性导致。

  但是可以设置使用其他的方式比如验证ip，设置cookie部分数据有效期等等。

这本身就是一个 发现问题->实现方案->再次发现问题->... 的过程 。归根结底还是http的无状态导致（从一个页面跳到另一个页面无法知道请求者的身份）



## OSI七层模型

	应用层 SMTP FTP HTTP
	表示层
	会话层
	传输层 TCP UDP 网关
	网络层 IP 路由器
	数据链路层 以太网 网桥
	物理层 转发器 

## TCP/IP 四层

	应用层
	传输层
	网络层
	数据链路层

## HTTP-Referer

[阮一峰的Referer教程](http://www.ruanyifeng.com/blog/2019/06/http-referer.html)
